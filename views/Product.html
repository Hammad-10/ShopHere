<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/ptest/ShopHere/css/Product.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <title>Product Page</title>
    <style>
        .productContainer {
            margin-top: 50px;
        }

        .productImage {
            width: 100%;
            max-width: 400px;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .productImage:hover {
            transform: scale(1.05);
        }

        .quantityBox {
            margin-top: 20px;
        }

        .add-to-cart {
            margin-top: 20px;
            background-color: #007bff;
            color: white;
            border-radius: 25px;
            padding: 10px 20px;
            border: none;
            transition: background-color 0.3s ease;
        }

        .add-to-cart:hover {
            background-color: #0056b3;
        }

        .socialMediaIcons {
            margin-top: 30px;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .socialMediaIcons svg {
            cursor: pointer;
            transition: transform 0.3s ease, color 0.3s ease;
        }

        .socialMediaIcons svg:hover {
            transform: scale(1.2);
            color: #007bff;
        }

        .productimages img {
            width: 100%;
            max-width: 400px;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .productimages img:hover {
            transform: scale(1.05);
        }

        /* Mini Cart Styling */
        .offcanvas .cart-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }

        .offcanvas .cart-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            margin-right: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .offcanvas .cart-item h5 {
            margin: 0;
            font-size: 16px;
            font-weight: bold;
        }

        .offcanvas .cart-item p {
            margin: 5px 0;
            font-size: 14px;
            color: #555;
        }

        .offcanvas .btn-danger {
            margin-left: auto;
        }

        .btnsDiv a {
            margin-top: 15px;
            border-radius: 25px;
            padding: 10px 20px;
            transition: background-color 0.3s ease;
        }

        .checkoutBtn:hover, .continueShopBtn:hover {
            background-color: #343a40;
            color: white;
        }
    </style>
</head>

<body>

    <div id="navbar"></div>


    <?php 
    $imagepaths = explode(',', $_SESSION['images']); // Split the images into an array
    
    $firstImage = '';
    $secondImage = '';
    $thirdImage = '';
    
    $length = count($imagepaths);
    
    for($i = 0; $i < $length; $i++){
        if($i == 0){
            $firstImage = $imagepaths[$i]; // Get the first image from the array
        }
        else if($i == 1){
            $secondImage = $imagepaths[$i]; // Get the second image from the array
        }
        else if($i == 2){
            $thirdImage = $imagepaths[$i]; // Get the third image from the array
        }
    }
    ?>

    <!-- Product Details Section -->
    <div class="container productContainer">
        <div class="row">
            <div class="col-md-6">
                <div class="imageDiv">
                    <img src="<?php echo htmlspecialchars($firstImage); ?>" alt="<?php echo $_SESSION['name'] ?>" class="productImage">
                </div>
            </div>

            <div class="col-md-6">
                <div class="product-item">
                    <h2><?php echo $_SESSION['name'] ?></h2>
                    <small class="card-text">$ <?php echo $_SESSION['price'] ?></small>

                    <div class="quantityBox">
                        <label for="quantity">Quantity:</label>
                        <input type="number" id="quantity" name="quantity" value="1" min="1" class="form-control w-25">
                    </div>

                    <button class="add-to-cart" id="add-to-cart" data-product-sno="<?php echo $_SESSION['sno']; ?>" data-product-price="<?php echo $_SESSION['price']; ?>">
                        Add to Cart
                    </button>

                    <div class="socialMediaIcons mt-4">
                        <h5>Share</h5>

                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-facebook" viewBox="0 0 16 16">
                            <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"/>
                        </svg>
                        <!-- Add more social media icons here -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-instagram" viewBox="0 0 16 16">
                          <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"/>
                      </svg>
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
                        <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"/>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-facebook" viewBox="0 0 16 16">
                      <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"/>
                  </svg>

                    </div>

                    <h3 class="mt-4">Description</h3>
                    <p><?php echo $_SESSION['name'] ?> Serum is a luxurious blend of organic ingredients designed to nourish and rejuvenate the delicate skin around your eyes. With regular use, you'll notice a reduction in fine lines and a brighter, more youthful appearance.</p>
                </div>
            </div>
        </div>

        <div class="row productimages mt-4">
            <div class="col-md-6">
                <img src="<?php echo htmlspecialchars($secondImage); ?>" alt="Product Image 2">
            </div>
            <div class="col-md-6">
                <img src="<?php echo htmlspecialchars($thirdImage); ?>" alt="Product Image 3">
            </div>
        </div>
    </div>

    <!-- Mini Cart -->
    <div class="offcanvas offcanvas-end" data-bs-backdrop="static" tabindex="-1" id="cartModal" aria-labelledby="staticBackdropLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="staticBackdropLabel">Cart</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>

        <div class="offcanvas-body">
            <div id="cartItemsList">
                <!-- Cart items will be dynamically added here -->
                <?php while($row = $orderitems->fetch_assoc()){ 
                    $imagepaths = explode(',', $row['image']); 
                    $firstImage = $imagepaths[0];
                ?>
                <div class="cart-item">
                    <img alt="image" class="productImage" src="<?php echo htmlspecialchars($firstImage); ?>">
                    <div class="productDetailsdiv">
                        <h5><?php echo $row['name']; ?></h5>
                        <p><strong>Price:</strong> $<?php echo $row['price']; ?></p>
                        <select title="quantity" class="form-select w-25">
                            <option value="<?php echo $row['quantity']; ?>"><?php echo $row['quantity']; ?></option>
                        </select>
                        <button class="btn btn-danger btn-sm ms-2" id="remove-item" data-index="<?php echo $row['product_sno']; ?>">Remove</button>
                    </div>
                </div>
                <?php } ?>
            </div>

            <div class="btnsDiv d-flex flex-column align-items-center">
                <a href="/ptest/ShopHere/routes.php?page=checkout" class="checkoutBtn btn btn-dark w-100">Checkout</a>
                <a href="#" class="continueShopBtn btn btn-outline-dark w-100 mt-3">Continue Shopping</a>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer id="footer">
        &copy; 2024 Beauty Crafts Co. All Rights Reserved.
    </footer>

    <!-- Bootstrap and JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <script src="/ptest/ShopHere/js/LoadComponent.js"></script>
    <script src="/ptest/ShopHere/js/cartCounter.js"></script>
    <script src="/ptest/ShopHere/js/cartajax.js"></script>

</body>
</html>
